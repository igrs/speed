---
layout: default
category: mobile
date: 2012-10-01
title: リンク先ページのリダイレクトでキャッシュを利用できるようにする
---
## リンク先ページのリダイレクトでキャッシュを利用できるようにする

原文：[https://developers.google.com/speed/docs/best-practices/mobile#CacheLandingPageRedirects](https://developers.google.com/speed/docs/best-practices/mobile#CacheLandingPageRedirects)

### Overview

例えば、www.example.comからm.example.comへのように、多くのページ、とりわけモバイルページにおいてリダイレクトはユーザーを異なるURLに飛ばす。これらのリダイレクトをブラウザーにキャッシュさせることで、再訪問時の読み込み時間をスピードアップすることが可能だ。

### Details

本当の意味でのベストプラクティスではリダイレクトをできる限り取り除くことだが、ランディングページのリダイレクトを辞めることは（モバイルサイトへのリダイレクトなど特に）厳しいかもしれない。例えば、異なるサーバーからモバイルサイトがホスティングされている場合、これは違うホストネームへリダイレクトを必要とすることを意味する。このケースにおいて、再訪問ユーザーの読み込み時間を削減するためにモバイルサイトへリダイレクトをキャッシュ可能にすることは非常に重要なことだ。もし、デスクトップサイトとモバイルサイトが同じサーバーからホスティングされているのなら、リダイレクトを取り除き、デスクトップと同じURLで提供すべきだ。


### Recommendations

プロキシーが非モバイルユーザーにモバイルサイトへのリダイレクトをするのを防止するために、リダイレクトはプライベートなキャッシュでなければならない。このリダイレクトには`Vary: User-Agent`ヘッダーと`Cache-Control: private`ヘッダーを含むようにすべきだ。私たちは1日期限のキャッシュ付き302リダイレクトを推奨する。これらのヘッダーは前述の挙動を防止するために効果を発揮する。また、HTTP/1.0プロキシーがリダイレクトをキャッシュし、非モバイルユーザーへ適用するのを防ぐために、`Expires`ヘッダーも含めても問題ない。