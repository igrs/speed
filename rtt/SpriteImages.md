---
layout: default
category: rtt
date: 2012-10-01
title: CSSスプライトに画像をまとめる
---
## CSSスプライトに画像をまとめる

原文：[https://developers.google.com/speed/docs/best-practices/rtt#SpriteImages](https://developers.google.com/speed/docs/best-practices/rtt#SpriteImages)

### Overview

CSSスプライトで画像をできる限りまとめることはリソースのダウンロードする際のラウンドトリップの回数を削減することだけでなく、リクエストのオーバーヘッドも削減し、なおかつトータルのダウンロードバイト数も削減できる。

### Details

JavaScript, CSS同様に複数の画像をダウンロードすることは余計なラウンドトリップを発生させるので、多くの画像を含むサイトはそれらをまとめ、少数のファイルにすることでレイテンシーを削減することができる。

### Recommendations

__一緒に読み込まれる画像をスプライトする __  
同じページ上で読み込まれる、または常に一緒に読み込まれる画像をまとめる。例えば、すべてのページで読み込まれるアイコンセットのようなものはスプライトすべきだ。動的に生成されるようなプロフィール写真や頻繁に更新される画像はスプライトの候補としてふさわしくない。

__GIF/PNG画像をまずスプライトする __  
GIF/PNGはロスレス圧縮画像なのでスプライト化による画質の劣化はない。

__小さな画像をまずスプライトする __  
リクエスト毎に必ず[リクエスオーバーヘッド](https://developers.google.com/speed/docs/best-practices/request)が発生するので、小さな画像をダウンロードすることでリクエストオーバーヘッドによる時間が読み込み時間の大半となってしまう。小さな画像はスプライトでまとめることによって、画像ごとに発生するオーバーヘッドも1回のオーバーヘッドだけで済ませることができる。

__キャッシュ可能な画像をスプライトする __  
スプライト化した画像に[キャッシュを効かせる](/speed/caching/LeverageBrowserCaching.html)ということは、一度ブラウザーで読みこめば、再読み込みしなくても良いことを意味する。

__Spriteサービスを利用する__  
[Sprite Me](http://spriteme.org/)のようなサービスを利用すれば簡単にCSSスプライトを実装できる。

__スプライト画像の空白を最小限にする __  
画像を表示するためにブラウザーは画像に対して解凍とデコードをする。デコード化された画像サイズは画像のピクセル数に比例するので、スプライト画像の空白は画像サイズに対してインパクトを与えないかもしれないが、表示に使われないスプライト画像のピクセルがメモリの使用量増加させてしまう。これはブラウザの応答性を低くする可能性がある。

__似たようなカラーパレットの画像をスプライトする __  
256色以上のスプライト画像はパレットタイプカラーの代わりにPNG trueカラータイプになる。これはスプライト画像のサイズ増加を意味し、最適なスプライトは同じ256色カラーパレット内の画像をまとめることだ。もし、カラーにばらつきがあるのなら、256色に減色してからスプライトすることを考慮する。